{% extends 'base/base.html' %}

{% block content %}
<div id="content" class="container" style="min-height: 1080px; margin-right: 15%;">
  <!-- 카테고리, 본문 -->
  <div class="row">
    <!-- 카테고리 -->
    <div id="button_col" class="col-1" style="min-height: 1080px; padding: 0; width:32px; margin-left: 30px;">
      <button class="openbtn" onclick="openNav()"><i class="fa-solid fa-bars"></i></button>
      <div id="mySidepanel" class="sidepanel">
        <div class="closebbtn"><a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a></div>
        <div class="flex-shrink-0 p-3" style="width: 220px;">
          <a href="/" class="d-flex align-items-center pb-3 mb-3 link-body-emphasis text-decoration-none border-bottom">
            <span class="fs-5 fw-semibold">Category</span>
          </a>

          <form action="" method="post">
            {% csrf_token %}
            <div class="category">
              <ul class="list-unstyled ps-0">
                <li class="mb-1">
                  <button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed"
                    data-bs-toggle="collapse" data-bs-target="#home-collapse" aria-expanded="true" type="button">
                    언론사 선택
                  </button>
                  <div class="collapse show" id="home-collapse">
                    <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                      <div class="checkli">
                        <li><input type="checkbox" id="press1" name="press" value="1"
                            class="link-body-emphasis d-inline-flex text-decoration-none rounded"><label for="press1">경향신문</label></li>
                        <li><input type="checkbox" id="press2" name="press" value="2"
                            class="link-body-emphasis d-inline-flex text-decoration-none rounded"><label for="press2">국민일보</label></li>
                        <li><input type="checkbox" id="press3" name="press" value="3"
                            class="link-body-emphasis d-inline-flex text-decoration-none rounded"><label for="press3">동아일보</label></li>
                        <li><input type="checkbox" id="press4" name="press" value="4"
                            class="link-body-emphasis d-inline-flex text-decoration-none rounded"><label for="press4">문화일보</label></li>
                        <li><input type="checkbox" id="press5" name="press" value="5"
                            class="link-body-emphasis d-inline-flex text-decoration-none rounded"><label for="press5">서울신문</label></li>
                        <li><input type="checkbox" id="press6" name="press" value="6"
                            class="link-body-emphasis d-inline-flex text-decoration-none rounded"><label for="press6">세계일보</label></li>
                        <li><input type="checkbox" id="press7" name="press" value="7"
                            class="link-body-emphasis d-inline-flex text-decoration-none rounded"><label for="press7">조선일보</label></li>
                        <li><input type="checkbox" id="press8" name="press" value="8"
                            class="link-body-emphasis d-inline-flex text-decoration-none rounded"><label for="press8">중앙일보</label></li>
                        <li><input type="checkbox" id="press9" name="press" value="9"
                            class="link-body-emphasis d-inline-flex text-decoration-none rounded"><label for="press9">한겨례</label></li>
                        <li><input type="checkbox" id="press10" name="press" value="10"
                            class="link-body-emphasis d-inline-flex text-decoration-none rounded"><label for="press10">한국일보</label></li>
                        </div>
                    </ul>
                  </div>
                </li>
                <li class="mb-1">
                  <button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed"
                    data-bs-toggle="collapse" data-bs-target="#dashboard-collapse" aria-expanded="false" type="button">
                    분야 선택
                  </button>
                  <div class="collapse" id="dashboard-collapse">
                    <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                      <div class="checkli">
                        <li><input
                              type="checkbox" id="section1" name="section" value="1"
                              class="link-body-emphasis d-inline-flex text-decoration-none rounded"><label for="section1">정치</label> </li>
                        <li><input
                              type="checkbox"id="section2"  name="section" value="2"
                              class="link-body-emphasis d-inline-flex text-decoration-none rounded"><label for="section2">경제</label></li>
                        <li><input
                              type="checkbox" id="section3" name="section" value="3"
                              class="link-body-emphasis d-inline-flex text-decoration-none rounded"><label for="section3">사회</label></li>
                        <li><input
                              type="checkbox" id="section4" name="section" value="4"
                              class="link-body-emphasis d-inline-flex text-decoration-none rounded"><label for="section4">세계</label></li>
                        <li><input
                              type="checkbox" id="section5" name="section" value="5"
                              class="link-body-emphasis d-inline-flex text-decoration-none rounded"><label for="section5">IT</label></li>
                        </div>
                    </ul>
                  </div>
                </li>
              </ul>
            </div>
            <input type="submit" class="btn btn-primary btn-sm" value="검색">
            <input type="button" class="btn btn-danger btn-sm" value="초기화" onclick="location.replace(location.href)">
          </form>
        </div>
      </div>
    </div>
    <!-- 스크랩한 본문 -->
    <div id="summary_col" class="col-1">
      <div class="summary">
        <ul id="ul1">
          <li class="scrap">
            <button id="test" onclick="rresize()"
              class="btn btn-toggle btn-sm d-inline-flex align-items-center rounded border-0 collapsed"
              data-bs-toggle="collapse" data-bs-target="#oneday-collapse" aria-expanded="true" type="button">
              오늘
            </button>
            <div class="collapse show" id="oneday-collapse">
              <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small" id="edit">
                {% for article in dbarticles_today %}
                <div id="div{{article.id}}">
                  <li>
                    <table>
                      <tr style="text-align: center;">
                        <td style="text-align: left;"><b style="font-size: 0.8em;">[{{article.article.press.name}},
                          {{article.article.section.name}}] {{article.article.headline}}</b></td>
                        <td width="150px"><b style="margin-bottom: 0px; font-size: 0.8em;">{{article.created_date}}</b>
                        </td>
                        <td style="text-align: right; margin-right: 0px; font-size: 0.8em; padding-right: 15px; width: 85px;"><b>{{article.article.writer}}</b></td>
                        <td rowspan="2" width="50px"><button class="btn btn-danger" style="width: 49px" value="{{article.id}}"
                          onclick="delete_scrap('{{article.id}}')">X</button></td>
                      </tr>
                      <tr>
                        <td colspan="3">{{article.article.content}}</td>
                      </tr>
                    </table>
                    <hr>
                  </li>
                </div>
                {% endfor %}
              </ul>
            </div>
          </li>
          <li class="mb-1">
            <button onclick="rresize()"
              class="btn btn-toggle btn-sm d-inline-flex align-items-center rounded border-0 collapsed"
              data-bs-toggle="collapse" data-bs-target="#thisweek-collapse" aria-expanded="false" type="buton">
              이번주
              <hr>
            </button>
            <div class="collapse" id="thisweek-collapse">
              <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small" id="edit">
                {% for article in dbarticles_this_week %}
                <div id="div{{article.id}}">
                <li>
                  <table width="100%">
                    <tr style="text-align: center;">
                      <td style="text-align: left;"><b style="font-size: 0.8em;">[{{article.article.press.name}},
                        {{article.article.section.name}}] {{article.article.headline}}</b></td>
                      <td width="150px"><b style="margin-bottom: 0px; font-size: 0.8em;">{{article.created_date}}</b>
                      </td>
                      <td style="text-align: right; margin-right: 0px; font-size: 0.8em; padding-right: 15px; width: 85px;"><b>{{article.article.writer}}</b></td>
                      <td rowspan="2" width="50px"><button class="btn btn-danger" style="width: 49px" value="{{article.id}}"
                        onclick="delete_scrap('{{article.id}}')">X</button></td>
                    </tr>
                    <tr>
                      <td colspan="3">{{article.article.content}}</td>
                    </tr>
                  </table>
                  <hr>
                </li>
              </div>
                {% endfor %}
              </ul>
            </div>
          </li>
          <li class="mb-1">
            <button onclick="rresize()"
              class="btn btn-toggle btn-sm d-inline-flex align-items-center rounded border-0 collapsed"
              data-bs-toggle="collapse" data-bs-target="#lastweek-collapse" aria-expanded="false" type="button">
              지난주
            </button>
            <div class="collapse" id="lastweek-collapse">
              <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small" id="edit">
                {% for article in dbarticles_last_week %}
                <div id="div{{article.id}}">
                  <li>
                    <table width="100%">
                      <tr style="text-align: center;">
                        <td style="text-align: left;"><b style="font-size: 0.8em;">[{{article.article.press.name}},
                          {{article.article.section.name}}] {{article.article.headline}}</b></td>
                        <td width="150px"><b style="margin-bottom: 0px; font-size: 0.8em;">{{article.created_date}}</b>
                        </td>
                        <td style="text-align: right; margin-right: 0px; font-size: 0.8em; padding-right: 15px; width: 85px;"><b>{{article.article.writer}}</b></td>
                        <td rowspan="2" width="50px"><button class="btn btn-danger" style="width: 49px" value="{{article.id}}"
                          onclick="delete_scrap('{{article.id}}')">X</button></td>
                      </tr>
                      <tr>
                        <td colspan="3">{{article.article.content}}</td>
                      </tr>
                    </table>
                    <hr>
                  </li>
                </div>
                {% endfor %}
              </ul>
            </div>
          </li>
          <li class="mb-1">
            <button onclick="rresize()"
              class="btn btn-toggle btn-sm d-inline-flex align-items-center rounded border-0 collapsed"
              data-bs-toggle="collapse" data-bs-target="#long_ago-collapse" aria-expanded="false" type="button">
              오래전
            </button>
            <div class="collapse" id="long_ago-collapse">
              <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small" id="edit">
                {% for article in dbarticles_long_ago %}
                <div id="div{{article.id}}">
                  <li>
                    <table width="100%">
                      <tr style="text-align: center;">
                        <td style="text-align: left;"><b style="font-size: 0.8em;">[{{article.article.press.name}},
                          {{article.article.section.name}}] {{article.article.headline}}</b></td>
                        <td width="150px"><b style="margin-bottom: 0px; font-size: 0.8em;">{{article.created_date}}</b>
                        </td>
                        <td style="text-align: right; margin-right: 0px; font-size: 0.8em; padding-right: 15px; width: 85px;"><b>{{article.article.writer}}</b></td>
                        <td rowspan="2" width="50px"><button class="btn btn-danger" style="width: 49px" value="{{article.id}}"
                          onclick="delete_scrap('{{article.id}}')">X</button></td>
                      </tr>
                      <tr>
                        <td colspan="3">{{article.article.content}}</td>
                      </tr>
                    </table>
                    <hr>
                  </li>
                </div>
                {% endfor %}
              </ul>
            </div>
          </li>
        </ul>
      </div>
    </div>

  </div>
</div>
<script>
  // 스크랩한 기사 삭제
  function delete_scrap(id) {
    $.ajax({
      type: 'GET',
      url: "/scrap/delete/" + id,
      data: {

      },
      // 삭제 성공 시 본문에서 가림
      success: () => {
        $('#div' + id).hide();
      },
      error: (err) => {
        console.log(err)
      }
    });
  }
</script>
{% endblock %}